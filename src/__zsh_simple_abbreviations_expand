#!/usr/bin/env zsh

emulate -L zsh -o extended_glob
local MATCH
LBUFFER=${LBUFFER%%(#m)[-_[:alnum:]]#}

if [[ -z "$MATCH" ]]; then
	# No match found, nothing to expand
	zle self-insert
	return
fi

if [[ -v "ZSH_SIMPLE_ABBREVIATIONS[$MATCH]" ]]; then
	# Key exists, expand abbreviation
	abbreviation="${ZSH_SIMPLE_ABBREVIATIONS[$MATCH]}"
	LBUFFER+="$abbreviation"
else
	# Key doesn't exist, restore the original match
	LBUFFER+="$MATCH"
fi
# Causes the syntax highlighting.
zle self-insert
